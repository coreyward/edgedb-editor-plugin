# AUTOGENERATED FROM grammars/EdgeDBSchema.syntax.yaml
name: "EdgeDBSchema"
scopeName: "source.eschema"
fileTypes: [
  "eschema"
]
uuid: "a560aad6-9c13-49c5-a369-5fb272c8ec1a"
patterns: [
  {
    include: "#all"
  }
]
repository:
  all:
    patterns: [
      {
        include: "#comments"
      }
      {
        include: "#keywords"
      }
      {
        include: "#attributes"
      }
      {
        include: "#operators"
      }
      {
        include: "#names"
      }
      {
        include: "#values"
      }
      {
        include: "#eql"
      }
    ]
  comments:
    patterns: [
      {
        name: "comment.line.note.eschema"
        match: "(#)\\s*(BUG|FIXME|TODO|XXX).*$\\n?"
        captures:
          "1":
            name: "punctuation.definition.comment.eschema"
          "2":
            name: "comment.line.note.notation.eschema"
      }
      {
        name: "comment.line.number-sign.eschema"
        match: "(#).*$\\n?"
        captures:
          "1":
            name: "punctuation.definition.comment.eschema"
      }
    ]
  keywords:
    patterns: [
      {
        name: "support.type.abstract.eschema"
        match: "\\b(abstract|final)\\b"
      }
      {
        name: "support.type.required.eschema"
        match: "\\b(required)\\b"
      }
      {
        name: "keyword.other.declaration.eschema"
        match: '''
          (?x) \\b(
            action | atom | attribute | concept | constraint | event |
            extends | index | initial | link | linkproperty | properties |
            value
          )\\b
          
        '''
      }
      {
        name: "keyword.operator.eschema"
        match: "\\b(as|import|on|to)\\b"
      }
      {
        name: "constant.language.boolean.true.eschema"
        match: "\\b(true)\\b"
      }
      {
        name: "constant.language.boolean.false.eschema"
        match: "\\b(false)\\b"
      }
    ]
  attributes:
    patterns: [
      {
        name: "meta.attribute.eschema"
        match: '''
          (?x)
            ^\\s+
              ([[:alpha:]_][[:alnum:]_]*)
                (?=\\s*:([^=]|\\n))
          
        '''
        captures:
          "1":
            name: "variable.parameter.attribute.eschema"
      }
      {
        name: "meta.attributes.eschema"
        match: '''
          (?x)
            ^\\s+
              ([[:alpha:]_][[:alnum:]_]*)
                (?=\\s*:=)
          
        '''
        captures:
          "1":
            name: "constant.language.computable.eschema"
      }
    ]
  operators:
    patterns: [
      {
        name: "keyword.operator.namespace.eschema"
        match: "(::)"
      }
    ]
  names:
    patterns: [
      {
        name: "support.type.builtin.eschema"
        match: '''
          (?x) \\b(
            std | any | typeref | atomref | conceptref | bytes |
            datetime | uuid | str | timedelta | date | time | int | none |
            float | bool | pattern | sequence
          )\\b
          
        '''
      }
    ]
  values:
    patterns: [
      {
        name: "constant.language.mapping.eschema"
        match: "(11|1\\*|\\*1|\\*\\*)"
      }
      {
        include: "#list"
      }
      {
        include: "#number"
      }
      {
        include: "#string"
      }
      {
        include: "#eql-string-oneline"
      }
      {
        include: "#eql-string"
      }
    ]
  number:
    name: "constant.numeric.eschema"
    patterns: [
      {
        include: "#number-dec"
      }
    ]
  "number-dec":
    name: "constant.numeric.dec.eschema"
    match: '''
      (?x)
          (?:
            #decimal part
            \\.(_*)(?:[0-9](?:[0-9_]*[0-9])?)
            |
            # integer part
            \\b(?:[1-9](?:[0-9_]*[0-9])?|0)
              (?:\\.(_*)[0-9](?:[0-9_]*[0-9])?)?
          )
          ((_*)([eE][\\+\\-]?)(_*)[0-9](?:[0-9_]*[0-9])?)?
      
        (_*)
        \\b
      
    '''
    captures:
      "1":
        name: "invalid.illegal.dec.eschema"
      "2":
        name: "invalid.illegal.dec.eschema"
      "4":
        name: "invalid.illegal.dec.eschema"
      "5":
        name: "storage.type.number.eschema"
      "6":
        name: "invalid.illegal.dec.eschema"
      "7":
        name: "invalid.illegal.dec.eschema"
  string:
    patterns: [
      {
        name: "string.quoted.eschema"
        begin: "(['\"])"
        end: "(\\1)"
        beginCaptures:
          "1":
            name: "punctuation.definition.string.begin.eschema"
        endCaptures:
          "1":
            name: "punctuation.definition.string.end.eschema"
        patterns: [
          {
            include: "#string-escapes"
          }
        ]
      }
      {
        name: "string.dollar.eschema"
        begin: "(\\$([[:alpha:]_][[:alnum:]]*)*\\$)"
        end: "(\\1)"
        beginCaptures:
          "1":
            name: "punctuation.definition.string.begin.eschema"
        endCaptures:
          "1":
            name: "punctuation.definition.string.end.eschema"
      }
    ]
  "string-escapes":
    name: "constant.character.escape.eschema"
    match: "(\\\\['\"])"
  list:
    begin: "\\["
    end: "\\]"
    beginCaptures:
      "0":
        name: "punctuation.definition.list.begin.eschema"
    endCaptures:
      "0":
        name: "punctuation.definition.list.end.eschema"
    patterns: [
      {
        include: "#values"
      }
    ]
  "eql-string-oneline":
    name: "meta.raw.oneline.eschema"
    begin: "(:=)\\s*(?=\\S)"
    end: "$"
    beginCaptures:
      "1":
        name: "keyword.operator.eschema"
    patterns: [
      {
        include: "source.edgeql"
      }
    ]
  "eql-string":
    begin: "(:=)"
    end: "(?<!,=)(\\s*$)"
    beginCaptures:
      "1":
        name: "keyword.operator.eschema"
    patterns: [
      {
        include: "source.edgeql"
      }
    ]
  eql:
    name: "meta.raw.oneline.eschema"
    begin: "(?=SELECT)"
    end: "(^\\s*$)|(?=\\s*)(?!SELECT)"
    beginCaptures:
      "1":
        name: "keyword.operator.eschema"
    patterns: [
      {
        include: "source.edgeql"
      }
    ]
